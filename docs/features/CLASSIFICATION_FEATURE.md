# 🏷️ ميزة التصنيف - Classification Feature

## نظرة عامة

تم إضافة ميزة جديدة لعرض التصنيف المطلوب لكل منافسة.

---

## 🎯 كيفية الاستخدام

### في واجهة التطبيق:

1. **جلب المنافسات** → اضغط "جلب المنافسات"
2. **عرض التصنيف** → اضغط زر "🏷️ عرض التصنيف" لأي منافسة
3. **النتيجة** → سيظهر التصنيف بلونين:
   - ✅ **أخضر** → "غير مطلوب" (لا يحتاج تصنيف)
   - ⚠️ **أحمر** → يتطلب تصنيف محدد

---

## 📊 أنواع التصنيف

### 1. غير مطلوب ✅
- المنافسة مفتوحة للجميع
- لا يحتاج إلى تصنيف معين
- **اللون: أخضر**

### 2. مطلوب ⚠️
- المنافسة تتطلب تصنيف محدد
- مثال: "مقاولات عامة - الدرجة الأولى"
- **اللون: أحمر/أصفر**

---

## 🔧 التفاصيل التقنية

### API Endpoint:
```
GET /api/tender/{tenderIdString}/classification
```

### مصدر البيانات:
```
https://tenders.etimad.sa/Tender/GetRelationsDetailsViewComponenet?tenderIdStr=...
```

### الحقول المستخرجة:
- **classification**: نص التصنيف (مثل: "غير مطلوب")
- **requires_classification**: هل يتطلب تصنيف؟ (true/false)

---

## 💡 الفائدة

الآن يمكنك:
- ✅ تصفية المنافسات حسب التصنيف
- ✅ التركيز على المنافسات المتاحة لك
- ✅ تجنب المنافسات التي تتطلب تصنيفات لا تملكها
- ✅ توفير الوقت في فحص المنافسات يدوياً

---

## 🎨 تغييرات واجهة المستخدم

### زر جديد:
```
🏷️ عرض التصنيف
```

### بعد الضغط:
- يظهر حقل جديد في معلومات المنافسة
- **التصنيف:** [النص بلون مناسب]
- الزر يتحول إلى:
  - ✅ **"لا يتطلب تصنيف"** (أخضر)
  - ⚠️ **"يتطلب تصنيف"** (أصفر)

---

## 📁 الملفات المعدلة

1. **`tender_scraper.py`**
   - إضافة `get_tender_classification()`
   - تحليل HTML من endpoint التصنيف

2. **`app.py`**
   - إضافة `/api/tender/<id>/classification` endpoint

3. **`static/script.js`**
   - إضافة `fetchAndDisplayClassification()`
   - تحديث `createTenderCard()` لإضافة زر التصنيف

4. **`static/style.css`**
   - إضافة `.btn-classification` styling

---

## 🔮 تطوير مستقبلي

### ممكن إضافة:
- ✅ فلتر لإخفاء المنافسات التي تتطلب تصنيف
- ✅ فلتر حسب نوع التصنيف المطلوب
- ✅ جلب التصنيف تلقائياً عند جلب المنافسات
- ✅ عرض تفاصيل إضافية (موقع التنفيذ، النشاط، إلخ)

---

## 🧪 اختبار الميزة

### خطوات الاختبار:

1. شغل التطبيق: `python app.py`
2. افتح: http://127.0.0.1:5000
3. اضغط "جلب المنافسات"
4. اضغط "🏷️ عرض التصنيف" لأي منافسة
5. شاهد النتيجة:
   - ✅ "غير مطلوب" باللون الأخضر
   - ⚠️ نص التصنيف المطلوب باللون الأحمر

---

## ❓ الأسئلة الشائعة

**Q: هل التصنيف يظهر تلقائياً؟**
A: لا، يجب الضغط على زر "عرض التصنيف" لكل منافسة.

**Q: لماذا لا يكون تلقائي؟**
A: لتوفير السرعة - جلب التصنيف يتطلب استدعاء API إضافي لكل منافسة.

**Q: هل يمكن جلب جميع التصنيفات مرة واحدة؟**
A: يمكن تطويره مستقبلاً بزر "عرض جميع التصنيفات".

**Q: ماذا لو فشل جلب التصنيف؟**
A: سيظهر "❌ فشل التحميل" ويمكنك المحاولة مرة أخرى.

---

**✅ الميزة جاهزة للاستخدام!**

التطبيق يعمل على: http://127.0.0.1:5000
