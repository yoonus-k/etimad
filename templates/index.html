<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุงูุณุงุช ุงุนุชูุงุฏ - Etimad Tenders</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>๐๏ธ ููุงูุณุงุช ุงุนุชูุงุฏ</h1>
            <p>ุนุฑุถ ุงูููุงูุณุงุช ุงูุชู ูุง ุชุชุทูุจ ุชุตููู</p>
        </header>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="tenders">๐ ุงูููุงูุณุงุช</button>
            <button class="tab-btn" data-tab="downloads">๐ฅ ุงูุชุญูููุงุช ูุงูุชุญูููุงุช</button>
            <button class="tab-btn" data-tab="costs">๐ฐ ุงูุชูุงููู</button>
        </div>

        <!-- Tenders Tab -->
        <div id="tendersTab" class="tab-content active">
            <div class="controls">
                <button id="updateCookiesBtn" class="btn-connect">๐ช ุชุญุฏูุซ ุงูููููุฒ</button>
                <button id="fetchBtn" class="btn-primary">ุฌูุจ ุงูููุงูุณุงุช</button>
                <button id="fetchQuickBtn" class="btn-quick">โก ุฌูุจ ุณุฑูุน (10 ููุงูุณุงุช)</button>
                <button id="checkClassificationBtn" class="btn-check-classification" style="display: none;">๐ ูุญุต ุงูุชุตููู ูุญุฐู ุงููุทููุจ</button>
                <span id="tenderCount" class="count-badge"></span>
                <span id="connectionStatus" class="status-badge"></span>
                <span id="keepAliveStatus" class="status-badge keep-alive-status" title="ุญุงูุฉ ุชุญุฏูุซ ุงูุฌูุณุฉ ุงูุชููุงุฆู">๐ ุฌุงุฑู ุงูุชุญููู...</span>
            </div>

            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>ุฌุงุฑู ุชุญููู ุงูููุงูุณุงุช...</p>
            </div>

            <div id="error" class="error-message" style="display: none;"></div>

            <div id="tendersContainer" class="tenders-container">
                <!-- Tenders will be displayed here -->
            </div>
        </div>

        <!-- Downloads Tab (Phase 5) -->
        <div id="downloadsTab" class="tab-content">
            <div class="controls">
                <button id="refreshDownloadsBtn" class="btn-primary">๐ ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
                <button id="batchAnalyzeBtn" class="btn-analyze-batch">๐ค ุชุญููู ุงููุญุฏุฏุฉ</button>
                <span id="downloadsCount" class="count-badge"></span>
            </div>

            <div id="downloadsContainer" class="downloads-container">
                <!-- Downloaded tenders will be displayed here -->
            </div>
        </div>

        <!-- Costs Tab (Phase 5) -->
        <div id="costsTab" class="tab-content">
            <div class="costs-summary-container">
                <div class="cost-card">
                    <h3>๐ ููุฎุต ุงูุชูุงููู ุงูุดูุฑู</h3>
                    <div id="monthlyCostSummary">
                        <!-- Cost summary will be displayed here -->
                    </div>
                </div>

                <div class="cost-card">
                    <h3>๐ ุงูุชุญูููุงุช ุงูุฃุฎูุฑุฉ</h3>
                    <div id="recentAnalysesCosts">
                        <!-- Recent analyses costs will be displayed here -->
                    </div>
                </div>

                <div class="cost-card">
                    <h3>โ๏ธ ุฅุนุฏุงุฏุงุช ุงูููุฒุงููุฉ</h3>
                    <div class="budget-settings">
                        <label for="budgetLimit">ุญุฏ ุงูููุฒุงููุฉ ุงูุดูุฑู (ุฏููุงุฑ):</label>
                        <input type="number" id="budgetLimit" placeholder="100.00" step="0.01" min="0">
                        <button id="setBudgetBtn" class="btn-primary">ุญูุธ</button>
                    </div>
                </div>

                <div class="cost-card">
                    <h3>๏ฟฝ๏ธ ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ</h3>
                    <div class="cache-management">
                        <div id="cacheStats"></div>
                        <div class="cache-buttons">
                            <button class="btn-clear-cache" data-type="documents">ูุณุญ ุฐุงูุฑุฉ ุงููุณุชูุฏุงุช</button>
                            <button class="btn-clear-cache" data-type="search">ูุณุญ ุฐุงูุฑุฉ ุงูุจุญุซ</button>
                            <button class="btn-clear-cache" data-type="analysis">ูุณุญ ุฐุงูุฑุฉ ุงูุชุญูููุงุช</button>
                            <button class="btn-clear-cache-all" data-type="all">ูุณุญ ุงููู</button>
                        </div>
                </div>
            </div>
        </div>

        <!-- Cookie Update Modal -->
        <div id="cookieModal" class="cookie-modal">
            <div class="cookie-modal-content">
                <h3>๐ช ุชุญุฏูุซ ุงูููููุฒ</h3>
                <p style="color: #64748b; font-size: 14px; margin: 15px 0;">ุงูุตู ุงูููููุฒ ูู ุฅุถุงูุฉ ุงููุชุตูุญ:</p>
                
                <textarea 
                    id="cookieInput" 
                    placeholder="COOKIES = {
    'MobileAuthCookie': 'CfDJ8...',
    'TSPD_101': '088c...',
    ...
}"
                    rows="12" 
                    style="width: 100%; padding: 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 12px; direction: ltr; text-align: left; resize: vertical;"
                ></textarea>
                
                <div class="cookie-modal-buttons" style="margin-top: 20px;">
                    <button id="saveCookiesBtn" class="btn-save">๐พ ุญูุธ</button>
                    <button id="cancelCookiesBtn" class="btn-cancel">โ ุฅูุบุงุก</button>
                </div>
            </div>
        </div>

        <!-- Analysis Progress Modal -->
        <div id="analysisModal" class="analysis-modal" style="display: none;">
            <div class="analysis-modal-content">
                <h3>๐ค ุชุญููู ุงูููุงูุณุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</h3>
                <p id="analysisTenderName" style="color: #64748b; font-size: 14px; margin: 15px 0;"></p>
                
                <div class="analysis-progress">
                    <div class="progress-bar-container">
                        <div id="analysisProgressBar" class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div id="analysisProgressText" class="progress-text">0%</div>
                </div>
                
                <div id="analysisCurrentStep" style="margin: 20px 0; padding: 15px; background: #f0f9ff; border-radius: 8px; font-weight: bold; color: #0369a1;">
                    ุฌุงุฑู ุงูุชุญููู...
                </div>
                
                <div class="analysis-modal-buttons" style="margin-top: 20px;">
                    <button id="closeAnalysisBtn" class="btn-cancel">ุฅุบูุงู</button>
                </div>
            </div>
        </div>

        <!-- Analysis Result Modal -->
        <div id="resultModal" class="result-modal" style="display: none;">
            <div class="result-modal-content">
                <button class="modal-close-btn" onclick="closeResultModal()">โ</button>
                <h3>๐ ูุชุงุฆุฌ ุงูุชุญููู</h3>
                
                <div id="resultContent" class="result-content">
                    <!-- Results will be populated here -->
                </div>
                
                <div class="result-modal-buttons">
                    <button class="btn-view-report" onclick="viewReport('ar')">๐ ุนุฑุถ ุงูุชูุฑูุฑ ุงูุนุฑุจู</button>
                    <button class="btn-view-report" onclick="viewReport('en')">๐ English Report</button>
                    <button class="btn-cancel" onclick="closeResultModal()">ุฅุบูุงู</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
